<!DOCTYPE html>
<html lang="en">

<head>
    <title>Game</title>
    <meta charset="utf-8" />
    <link rel="manifest" href="/manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' />
    <link rel="stylesheet" media="all" href="/style.css" />

</head>


<body class="loading">

<script>
    (function () {
        var redirect = sessionStorage.redirect;
        delete sessionStorage.redirect;
        if (redirect && redirect !== location.href) {
            history.replaceState(null, null, redirect);
        }
    })();
</script>
<script src="./bundle.js"></script>
<script>
    // window.addEventListener("gamepadconnected", function(e) {
    //   console.log("Gamepad connected at index %d: %s. %d buttons, %d axes.",
    //           e.gamepad.index, e.gamepad.id,
    //           e.gamepad.buttons.length, e.gamepad.axes.length);
    // });

    console.time("loading");
    var app = Elm.Main.init(
        {
            flags: {
                // devicePixelRatio: 0.1012658228,
                devicePixelRatio: window.devicePixelRatio || 1,
                levelUrl: "./assets/demo.json",
                seed: Math.floor(Math.random() * 0xFFFFFFFF)
            }
        }
    );
    // function toggleFullScreen() {
    //     var doc = window.document;
    //     var docEl = doc.documentElement;
    //
    //     var requestFullScreen = docEl.requestFullscreen || docEl.mozRequestFullScreen || docEl.webkitRequestFullScreen || docEl.msRequestFullscreen;
    //     var cancelFullScreen = doc.exitFullscreen || doc.mozCancelFullScreen || doc.webkitExitFullscreen || doc.msExitFullscreen;
    //
    //     if(!doc.fullscreenElement && !doc.mozFullScreenElement && !doc.webkitFullscreenElement && !doc.msFullscreenElement) {
    //         requestFullScreen.call(docEl);
    //     }
    //     else {
    //         cancelFullScreen.call(doc);
    //     }
    // }

    app.ports.start.subscribe(function (data) {
        console.timeEnd("loading");
        // document.body.addEventListener("click", toggleFullScreen);
        document.body.className = "loaded";
    });
</script>
</body>

</html>
